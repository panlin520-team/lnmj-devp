<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="experiencecardProduct">
    <resultMap id="BaseResultMap" type="ExperiencecardProduct">
        <id column="CardProductId" property="cardProductId" jdbcType="BIGINT"/>
        <result column="CardNum" property="cardNum" jdbcType="VARCHAR"/>
        <result column="ProductCode" property="productCode" jdbcType="VARCHAR"/>
        <result column="ProductKind" property="productKind" jdbcType="VARCHAR"/>
        <result column="ProductName" property="productName" jdbcType="VARCHAR"/>
        <result column="UseLimit" property="useLimit" jdbcType="VARCHAR"/>
        <result column="UseTotalTimes" property="useTotalTimes" jdbcType="INTEGER"/>
        <result column="Status" property="status" jdbcType="INTEGER"/>
        <result column="CreateOperator" property="createOperator" jdbcType="VARCHAR"/>
        <result column="CreateTime" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="ModifyOperator" property="modifyOperator" jdbcType="VARCHAR"/>
        <result column="DataChange_LastTime" property="dataChangeLastTime" jdbcType="TIMESTAMP"/>
    </resultMap>


    <sql id="Base_Column_List">
        CardProductId
        ,
        CardNum,
        ProductCode,
        ProductKind,
        ProductName,
        UseLimit,
        UseTotalTimes,
        EfficientCondition,
        EfficientDate,
        Link,
        TotalSales,
        TotalCommission,
        ForwardTitle,
        ForwardDescribe,
        LogoImge,
        Status,
        CreateOperator,
        CreateTime,
        ModifyOperator,
        DataChange_LastTime
    </sql>


    <select id="selectExpCardProductListByCarNum" resultMap="BaseResultMap" parameterType="String">
        select
        <include refid="Base_Column_List"/>
        from s_experiencecard_product
        where 1=1
        <if test="_parameter != null">
           and CardNum = #{cardNum}
        </if>
    </select>

    <delete id="deleteExpCardProductByCarNum" parameterType="String">
        delete
        from s_experiencecard_product
        where CardNum = #{cardNum}
    </delete>

    <delete id="deleteExpCardProductById" parameterType="Long">
        delete
        from s_experiencecard_product
        where CardProductId = #{cardProductId}
    </delete>


    <update id="updateExpCardProductById" parameterType="ExperiencecardProduct">
        update s_experiencecard_product
        <set>
            <if test="cardNum != null">
                CardNum = #{cardNum,jdbcType=VARCHAR},
            </if>
            <if test="productCode != null">
                ProductCode = #{productCode,jdbcType=VARCHAR},
            </if>
            <if test="productKind != null">
                ProductKind = #{productKind,jdbcType=VARCHAR},
            </if>
            <if test="productName != null">
                ProductName = #{productName,jdbcType=VARCHAR},
            </if>
            <if test="useLimit != null">
                UseLimit = #{useLimit,jdbcType=VARCHAR},
            </if>
            <if test="useTotalTimes != null">
                UseTotalTimes = #{useTotalTimes,jdbcType=INTEGER},
            </if>
            <if test="efficientCondition != null">
                EfficientCondition = #{efficientCondition,jdbcType=INTEGER},
            </if>
            <if test="efficientDate != null">
                EfficientDate = #{efficientDate,jdbcType=TIMESTAMP},
            </if>
            <if test="link != null">
                Link = #{link,jdbcType=VARCHAR},
            </if>
            <if test="totalSales != null">
                TotalSales = #{totalSales,jdbcType=DECIMAL},
            </if>
            <if test="totalCommission != null">
                TotalCommission = #{totalCommission,jdbcType=DECIMAL},
            </if>
            <if test="forwardTitle != null">
                ForwardTitle = #{forwardTitle,jdbcType=VARCHAR},
            </if>
            <if test="forwardDescribe != null">
                ForwardDescribe = #{forwardDescribe,jdbcType=VARCHAR},
            </if>
            <if test="logoImge != null">
                LogoImge = #{logoImge,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                Status = #{status,jdbcType=INTEGER},
            </if>
            <if test="createOperator != null">
                CreateOperator = #{createOperator,jdbcType=VARCHAR},
            </if>
            DataChange_LastTime = now()
        </set>
        where CardProductId = #{cardProductId,jdbcType=BIGINT}
    </update>


    <insert id="addExpCardProduct" parameterType="Map">
        insert into s_experiencecard_product
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="list[0].cardProductId != null">
                CardProductId,
            </if>
            <if test="list[0].cardNum != null">
                CardNum,
            </if>
            <if test="list[0].productCode != null">
                ProductCode,
            </if>
            <if test="list[0].productKind != null">
                ProductKind,
            </if>
            <if test="list[0].productName != null">
                ProductName,
            </if>
            <if test="list[0].useLimit != null">
                UseLimit,
            </if>
            <if test="list[0].useTotalTimes != null">
                UseTotalTimes,
            </if>
            <if test="list[0].efficientCondition != null">
                EfficientCondition,
            </if>
            <if test="list[0].efficientDate != null">
                EfficientDate,
            </if>
            <if test="list[0].link != null">
                Link,
            </if>
            <if test="list[0].totalSales != null">
                TotalSales,
            </if>
            <if test="list[0].totalCommission != null">
                TotalCommission,
            </if>
            <if test="list[0].forwardTitle != null">
                ForwardTitle,
            </if>
            <if test="list[0].forwardDescribe != null">
                ForwardDescribe,
            </if>
            <if test="list[0].logoImge != null">
                LogoImge,
            </if>
            <if test="list[0].status != null">
                Status,
            </if>
            <if test="list[0].createOperator != null">
                CreateOperator,
            </if>
            CreateTime
        </trim>
        values
        <foreach collection="list" item="item" separator=",">
            <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="item.cardProductId != null">
                    #{item.cardProductId},
                </if>
                <if test="item.cardNum != null">
                    #{item.cardNum},
                </if>
                <if test="item.productCode != null">
                    #{item.productCode},
                </if>
                <if test="item.productKind != null">
                    #{item.productKind},
                </if>
                <if test="item.productName != null">
                    #{item.productName},
                </if>
                <if test="item.useLimit != null">
                    #{item.useLimit},
                </if>
                <if test="item.useTotalTimes != null">
                    #{item.useTotalTimes},
                </if>
                <if test="item.efficientCondition != null">
                    #{item.efficientCondition},
                </if>
                <if test="item.efficientDate != null">
                    #{item.efficientDate},
                </if>
                <if test="item.link != null">
                    #{item.link},
                </if>
                <if test="item.totalSales != null">
                    #{item.totalSales},
                </if>
                <if test="item.totalCommission != null">
                    #{item.totalCommission},
                </if>
                <if test="item.forwardTitle != null">
                    #{item.forwardTitle},
                </if>
                <if test="item.forwardDescribe != null">
                    #{item.forwardDescribe},
                </if>
                <if test="item.logoImge != null">
                    #{item.logoImge},
                </if>
                <if test="item.status != null">
                    #{item.status},
                </if>
                <if test="item.createOperator != null">
                    #{item.createOperator},
                </if>
                now()
            </trim>
        </foreach>
    </insert>
</mapper>